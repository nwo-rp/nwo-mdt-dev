(self.webpackChunknwo_mdt=self.webpackChunknwo_mdt||[]).push([[283],{283:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AdminModule:()=>X});var i=n(1511),s=n(3548),o=n(1572);const r=function(){return["..","vehicles"]},c=function(){return["..","mlos"]};let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:4,consts:[[3,"routerLink"]],template:function(e,t){1&e&&(o.TgZ(0,"button",0),o._uU(1,"vehicles"),o.qZA(),o.TgZ(2,"button",0),o._uU(3,"mlos"),o.qZA()),2&e&&(o.Q6J("routerLink",o.DdM(2,r)),o.xp6(2),o.Q6J("routerLink",o.DdM(3,c)))},directives:[s.rH],styles:["[_nghost-%COMP%]{min-height:100%;display:grid;grid-template-columns:1fr 1fr}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{border:none}"],changeDetection:0}),e})();var a=n(8512),h=n(4689),d=n(9996),p=n(9063);let u=(()=>{class e{constructor(e,t){this.httpClient=e,this.environment=t}getVehicles(){return this.httpClient.get(`${this.environment.endpoint}/admin/vehicles`)}getBrands(){return this.httpClient.get(`${this.environment.endpoint}/admin/vehicles/brands`)}getCategories(){return this.httpClient.get(`${this.environment.endpoint}/admin/vehicles/categories`)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(p.eN),o.LFG("environment"))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n(6073),m=n(6599),f=n(6283),v=n(5583),C=n(1522);function Z(e,t){if(1&e&&(o.TgZ(0,"span",5),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.xp6(1),o.Oqu(e.name)}}function w(e,t){if(1&e&&(o.TgZ(0,"mat-option",6),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.Oqu(e.name)}}let b=(()=>{class e{constructor(){this.vehicles=[],this.brands=[],this.categories=[],this.filterChange=new o.vpe,this.form=new g.cw({brand:new g.NI}),this.form.valueChanges.pipe((0,m.b)(e=>this.filterChange.emit(e))).subscribe()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["mdt-admin-vehicle-filter"]],inputs:{vehicles:"vehicles",brands:"brands",categories:"categories"},outputs:{filterChange:"filterChange"},decls:8,vars:3,consts:[[3,"formGroup"],["appearance","fill"],["formControlName","brand","multiple",""],["class","list",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],[1,"list"],[3,"value"]],template:function(e,t){if(1&e&&(o.ynx(0,0),o.TgZ(1,"mat-form-field",1),o.TgZ(2,"mat-label"),o._uU(3,"Brand"),o.qZA(),o.TgZ(4,"mat-select",2),o.TgZ(5,"mat-select-trigger"),o.YNc(6,Z,2,1,"span",3),o.qZA(),o.YNc(7,w,2,2,"mat-option",4),o.qZA(),o.qZA(),o.BQk()),2&e){let e;o.Q6J("formGroup",t.form),o.xp6(6),o.Q6J("ngForOf",null==(e=t.form.get("brand"))?null:e.value),o.xp6(1),o.Q6J("ngForOf",t.brands)}},directives:[g.JL,g.sg,f.KE,f.hX,v.gD,g.JJ,g.u,v.$L,i.sg,C.ey],styles:['[_nghost-%COMP%]   .list[_ngcontent-%COMP%] ~ .list[_ngcontent-%COMP%]:before{content:", "}']}),e})(),y=(()=>{class e{transform(e,t){var n;return(null===(n=t.find(({id:t})=>t===e))||void 0===n?void 0:n.name)||"?"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Yjl({name:"vehicleBrand",type:e,pure:!0}),e})();function O(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",1),o.NdJ("click",function(){const t=o.CHM(e).$implicit;return o.oxw().selectedVehicleChange.next(t)}),o.TgZ(1,"span"),o._uU(2),o.ALo(3,"vehicleBrand"),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit,n=o.oxw();o.xp6(2),o.AsE(" ",o.xi3(3,2,e.brand,n.brands)," ",e.name||"<"+e.model+">"," ")}}let _=(()=>{class e{constructor(){this.vehicles=[],this.brands=[],this.categories=[],this.selectedVehicleChange=new o.vpe}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["mdt-admin-vehicle-list"]],inputs:{vehicles:"vehicles",brands:"brands",categories:"categories"},outputs:{selectedVehicleChange:"selectedVehicleChange"},decls:2,vars:1,consts:[[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"ul"),o.YNc(1,O,4,5,"li",0),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngForOf",t.vehicles))},directives:[i.sg],pipes:[y],styles:["[_nghost-%COMP%]{overflow:auto;display:flex;height:100%}[_nghost-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}"]}),e})();const M=function(){return[]};let A=(()=>{class e{constructor(e,t,n){this.adminVehiclesResource=e,this.router=t,this.activatedRoute=n,this.vehicles$=this.adminVehiclesResource.getVehicles().pipe((0,h.w)(e=>this.filter.pipe((0,d.U)(t=>this.filterVehicles(e,t))))),this.brands$=this.adminVehiclesResource.getBrands(),this.categories$=this.adminVehiclesResource.getCategories(),this.filter=new a.X({})}selectVehicle(e){this.router.navigate([e.model],{relativeTo:this.activatedRoute})}filterVehicles(e,t){return e.filter(e=>{var n;let i=!0;return i&&(i=0===((null===(n=null==t?void 0:t.brand)||void 0===n?void 0:n.length)||0)||((null==t?void 0:t.brand)||[]).find(({id:t})=>t===e.brand)),i})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(u),o.Y36(s.F0),o.Y36(s.gz))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:12,vars:24,consts:[[1,"toolbar"],[3,"vehicles","brands","categories","filterChange"],[1,"content"],[3,"vehicles","brands","categories","selectedVehicleChange"]],template:function(e,t){1&e&&(o._UZ(0,"div",0),o.TgZ(1,"mdt-admin-vehicle-filter",1),o.NdJ("filterChange",function(e){return t.filter.next(e)}),o.ALo(2,"async"),o.ALo(3,"async"),o.ALo(4,"async"),o.qZA(),o.TgZ(5,"div",2),o.TgZ(6,"mdt-admin-vehicle-list",3),o.NdJ("selectedVehicleChange",function(e){return t.selectVehicle(e)}),o.ALo(7,"async"),o.ALo(8,"async"),o.ALo(9,"async"),o.qZA(),o.TgZ(10,"div"),o._UZ(11,"router-outlet"),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.Q6J("vehicles",o.lcZ(2,6,t.vehicles$)||o.DdM(18,M))("brands",o.lcZ(3,8,t.brands$)||o.DdM(19,M))("categories",o.lcZ(4,10,t.categories$)||o.DdM(20,M)),o.xp6(5),o.Q6J("vehicles",o.lcZ(7,12,t.vehicles$)||o.DdM(21,M))("brands",o.lcZ(8,14,t.brands$)||o.DdM(22,M))("categories",o.lcZ(9,16,t.categories$)||o.DdM(23,M)))},directives:[b,_,s.lC],pipes:[i.Ov],styles:["[_nghost-%COMP%]{overflow:hidden;display:flex;flex-direction:column;height:100%}[_nghost-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;height:100%;overflow:hidden}[_nghost-%COMP%] > .content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{width:33%}[_nghost-%COMP%] > .content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{flex-grow:1}"],changeDetection:0}),e})();var x=n(7527);let P=(()=>{class e{constructor(e,t){this.adminVehiclesPage=e,this.activatedRoute=t,this.vehicle$=this.activatedRoute.params.pipe((0,h.w)(({model:e})=>this.adminVehiclesPage.vehicles$.pipe((0,d.U)(t=>t.find(t=>t.model===e)))),(0,x.d)())}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(A),o.Y36(s.gz))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:5,vars:5,consts:[[1,"toolbar"]],template:function(e,t){1&e&&(o._UZ(0,"div",0),o.TgZ(1,"pre"),o._uU(2),o.ALo(3,"json"),o.ALo(4,"async"),o.qZA()),2&e&&(o.xp6(2),o.hij("  ",o.lcZ(3,1,o.lcZ(4,3,t.vehicle$)),"\n"))},pipes:[i.Ts,i.Ov],styles:[""],changeDetection:0}),e})();var $=n(878),J=n(3080);function k(e,t){if(1&e&&(o.ynx(0),o._UZ(1,"div",4),o.BQk()),2&e){const e=t.$implicit,n=o.oxw().$implicit;o.xp6(1),o.Udp("background-image","url(assets/map/row-"+n+"-column-"+e+".png)")}}function B(e,t){if(1&e&&(o.ynx(0),o.YNc(1,k,2,2,"ng-container",3),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.columns)}}function T(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"div",5),o._uU(2," \u2717 "),o.qZA(),o.BQk()),2&e){const e=t.$implicit;o.xp6(1),o.Udp("transform","translate("+e.x+"px, "+e.y+"px)"),o.Q6J("title",e.label)}}const q=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:l,data:{title:"Administration",parent:"/"}},{path:"vehicles",component:A,data:{title:"Fahrzeuge",parent:"../dashboard"},children:[{path:":model",component:P}]},{path:"mlos",component:(()=>{class e{constructor(){this.rows=new Array(32).fill(void 0).map((e,t)=>t+1),this.columns=new Array(32).fill(void 0).map((e,t)=>t+1),this.gameScaleX=.66,this.gameScaleY=.66,this.offsetX=3750,this.offsetY=5515,this.offsetZ=0,this.scale$=new a.X(256),this.mlos$=(0,$.of)([[0,0,0,"zero"]]),this.marker$=(0,J.aj)([this.scale$,this.mlos$]).pipe((0,d.U)(([e,t])=>t.map(([t,n,i,s])=>({x:(+t*this.gameScaleX+this.offsetX)/256*e,y:(-n*this.gameScaleY+this.offsetY)/256*e,z:+i+this.offsetZ,label:s}))))}ngAfterContentInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["ng-component"]],decls:6,vars:4,consts:[[1,"toolbar"],[1,"content"],[1,"wrapper"],[4,"ngFor","ngForOf"],[1,"mapseg"],[1,"marker",3,"title"]],template:function(e,t){1&e&&(o._UZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.YNc(3,B,2,1,"ng-container",3),o.YNc(4,T,3,3,"ng-container",3),o.ALo(5,"async"),o.qZA(),o.qZA()),2&e&&(o.xp6(3),o.Q6J("ngForOf",t.rows),o.xp6(1),o.Q6J("ngForOf",o.lcZ(5,2,t.marker$)))},directives:[i.sg],pipes:[i.Ov],styles:["[_nghost-%COMP%]{height:100%;overflow:hidden;display:block}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{height:100%;overflow:hidden;display:block;overflow:scroll}[_nghost-%COMP%]   .content[_ngcontent-%COMP%] > .wrapper[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-rows:repeat(32,256px);grid-template-columns:repeat(32,256px)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%] > .wrapper[_ngcontent-%COMP%] > div.mapseg[_ngcontent-%COMP%]{width:100%;height:100%;background-size:100%;background-position:50%;background-repeat:no-repeat}[_nghost-%COMP%]   .content[_ngcontent-%COMP%] > .wrapper[_ngcontent-%COMP%] > div.marker[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%,-50%);color:red}"],changeDetection:0}),e})(),data:{title:"mlos",parent:"../dashboard"}}];let z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez,s.Bz]]}),e})();var U=n(5980);let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[]]}),e})(),L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez,s.Bz,F]]}),e})(),V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez,s.Bz,g.u5,g.UX,v.LD,F]]}),e})(),Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez,s.Bz,U.ot,L,V]]}),e})(),Y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez]]}),e})(),D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez]]}),e})(),X=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[],imports:[[i.ez,s.Bz.forChild(q),z,Q,Y,D]]}),e})()}}]);